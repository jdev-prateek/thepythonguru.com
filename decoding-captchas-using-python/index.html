<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Decoding captchas using Python - ThePythonGuru.com</title>

    
    



    <meta name="description" content="As everyone knows, captchas are those annoying things like &amp;quot;Enter the letters that you see on the image&amp;quot; on the registration or feedback pa…"/>



    <link rel="canonical" href="index.html">


<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Decoding captchas using Python" />

    <meta property="og:description" content="As everyone knows, captchas are those annoying things like &amp;quot;Enter the letters that you see on the image&amp;quot; on the registration or feedback pa…" />


<meta property="og:url" content="https://thepythonguru.com/decoding-captchas-using-python/" />
<meta property="og:site_name" content="thepythonguru.com" />


<meta property="article:publisher" content="https://www.facebook.com/thepythonguru" />



<meta name="twitter:card" content="summary_large_image" />

    <meta name="twitter:description" content="As everyone knows, captchas are those annoying things like &amp;quot;Enter the letters that you see on the image&amp;quot; on the registration or feedback pa…" />


<meta name="twitter:title" content="Decoding captchas using Python" />
<meta name="twitter:site" content="@thepythonguru" />

<meta name="twitter:creator" content="@thepythonguru" />




    
    
    


    
    
    


    <link rel="alternate" type="application/rss+xml" title="RSS" href="../feed.xml/index.html">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="icon" href="../static/wiki/favicon.png" sizes="32x32" />

    <link rel="stylesheet" href="../static/CACHE/css/output.6be9976864ee.css" type="text/css" />

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-39121661-7"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-39121661-7');
    </script>


</head>
<body>

<!-- Navigation -->
<nav class="navbar navbar-default navbar-inverse" >
    <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="../index.html">ThePythonGuru</a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse " id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                

                <li >
                    <a href="../index.html">Start Here</a>
                </li>
                <li >
                    <a href="../blog/index.html">Blog</a>
                </li>
                
                
                
                <li >
                    <a href="../contact-us/index.html">Contact</a>
                </li>
                <li >
                    <a href="../write-for-us/index.html">Write For Us</a>
                </li>
                <li class="dropdown">
                    <a href="index.html#" class="dropdown-toggle" data-toggle="dropdown" role="button"
                       aria-haspopup="true" aria-expanded="false">Tools <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="../tools/pygments-demo/index.html">Pygments Demo</a></li>
                    </ul>
                </li>




                
                
                
                
                
                
                
                
                
            </ul>

            
            
            
            
            
            
            
            

        </div>



        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

<div class="container">

    

    

    <div class="row">

        
        <div class="main">
            <div  class="col-lg-8 col-md-8 col-sm-12">
                

    


    
        

<ol class="breadcrumb">

    <li><a href="../index.html">Home</a></li>

    
        

        
            <li><a href="../blog/index.html">Blog</a></li>
        

        
            <li class="active">Decoding captchas using Python</li>
        
    

</ol>


    



<p class="advert">
    (Sponsors) Get started learning Python with <a rel="sponsored noopener" target="_blank" href="https://www.datacamp.com/?utm_source=thepythonguru&utm_campaign=thepythonguru_tutorials">DataCamp's</a>
    free <a rel="sponsored noopener" target="_blank" href="https://www.datacamp.com/courses/intro-to-python-for-data-science/?utm_source=thepythonguru&utm_campaign=thepythonguru_tutorials">Intro to Python tutorial</a>.

    Learn Data Science by completing interactive coding challenges and watching videos by expert instructors.
    <a rel="sponsored noopener" target="_blank" href="https://www.datacamp.com/courses/intro-to-python-for-data-science/?utm_source=thepythonguru&utm_campaign=thepythonguru_tutorials">Start Now!</a>
</p>
<hr>

<h1>Decoding captchas using Python</h1>




    <p><i class="fa fa-clock-o" aria-hidden="true"></i>
        Updated on Oct 09, 2020
    </p>


<hr>



<p>As everyone knows, captchas are those annoying things like &quot;Enter the letters that you see on the image&quot; on the registration or feedback pages.</p><p>CAPTCHA is designed so that a human could read the text without difficulty, while a machine can not. But on practice this usually does not work, because almost every simple text captcha posted on the site gets cracked after less then several months. Then comes ReCaptcha v2 which is way more complicated, but still it can be bypassed in automatic mode.</p><p>While this struggle between captcha makers and captcha solvers seems like endless, different people are interested in automatic captcha solution in order to maintain work of their software. Thats why in this particular article I will show how to crack text captchas using OCR method, as well as how to bypass complex Google ReCaptcha v2 with the help of real people.</p><p>All examples are written in Python 2.5 using the PIL library. It should also work in Python 2.6 and it was successfully tested in Python 2.7.3.</p><p>Python: <a href="http://www.python.org">www.python.org</a></p><p>PIL: <a href="http://www.pythonware.com/products/pil">www.pythonware.com/products/pil</a></p><p>Install them in the above order and you are ready to run the examples.</p><p>Also, in the examples I will rigidly set many values directly in the code. I have no goal of creating a universal captcha recognizer, but only to show how this is done.</p><span id="captcha-what-is-it-actually" class="anchor-target"></span><h2 class="heading">CAPTCHA: what is it actually <a class="header-link" href="index.html#captcha-what-is-it-actually">#</a></h2><hr>
<p>Mostly captcha is an example of one-way conversion. You can easily take a character set and get captcha from it, but not vice versa. Another subtlety - it should be easy for humans to read, but not amenable to machine recognition. CAPTCHA can be considered as a simple test such as &quot;Are you human?&quot; Basically, they are implemented as an image with some symbols or words.</p><p>They are used to prevent spam on many websites. For example, captcha can be found on the registration page of Windows Live ID.</p><p>You are shown the image and if you are a real person, then you need to enter its text in a separate field. Seems like a good idea that can protect from thousands of automatic registrations for spamming or distributing Viagra on forums, isn&#39;t it? The problem is that AI, and in particular image recognition methods, have undergone significant changes and are becoming very effective in certain areas. OCR (Optical Character Recognition) these days is pretty accurate and easily recognizes printed text. So captcha-makers decided to add a little color and lines to captchas to make them more difficult for the computer to solve, but without adding any inconvenience for users. This is a kind of arms race and, as usual, one group comes up with more powerful weapons for every defense made by another group. Defeating such a reinforced captcha is more difficult, but still possible. Plus, the image should remain fairly simple so as not to cause irritation in ordinary people.</p><p><img src="../media/uploads/2020/05/31/1.gif" alt="1.gif"></p><p>This image is an example of a captcha that we will decrypt. This is a real captcha that is posted on a real site.</p><p>It&#39;s a fairly simple captcha, which consists of characters of the same color and size on a white background with some noise (pixels, colors, lines). You probably think that this noise on the background will make it difficult to recognize, but I will show how easy it is to remove it. Although this is not a very strong captcha, it is a good example for our program.</p><span id="how-to-find-and-extract-text-from-images" class="anchor-target"></span><h2 class="heading">How to find and extract text from images <a class="header-link" href="index.html#how-to-find-and-extract-text-from-images">#</a></h2><hr>
<p>There are many methods for determining the location of text on the image and its extraction. You can google and find thousands of articles that explain new methods and algorithms for locating text.</p><p>In this example I will use color extraction. This is a fairly simple technique with which I got pretty good results.</p><p>For our examples, I will use a multi-valued image decomposition algorithm. In essence, this means that we first plot a histogram of the colors of the image. This is done by obtaining all the pixels on the image grouped by color, and then counting is performed for each group. If you look at our test captcha, you can see three primary colors:</p><p>White (background)</p><p>Gray (noise)</p><p>Red (text)</p><p>In Python, this will look very simple.</p><p>The following code opens the image, converts it to GIF (which is easier for us to work, because it has only 255 colors) and prints a histogram of colors:</p><div class="codeblock language-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>

<span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;captcha.gif&quot;</span><span class="p">)</span>
<span class="n">im</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s2">&quot;P&quot;</span><span class="p">)</span>

<span class="k">print</span> <span class="n">im</span><span class="o">.</span><span class="n">histogram</span><span class="p">()</span>
</pre></div>
</td></tr></table></div><p>As a result, we get the following:</p><div class="codeblock language-text"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span></span>[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0

, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0,

1, 0, 0, 2, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,

0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 2, 1, 0, 0, 0, 2, 0, 0, 0, 0, 1, 0, 1, 1, 0, 0

, 1, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 0, 0, 0, 1, 2, 0, 1, 0, 0, 1,

0, 2, 0, 0, 1, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 3, 1, 3, 3, 0,

0, 0, 0, 0, 0, 1, 0, 3, 2, 132, 1, 1, 0, 0, 0, 1, 2, 0, 0, 0, 0, 0, 0, 0, 15, 0

, 1, 0, 1, 0, 0, 8, 1, 0, 0, 0, 0, 1, 6, 0, 2, 0, 0, 0, 0, 18, 1, 1, 1, 1, 1, 2,

365, 115, 0, 1, 0, 0, 0, 135, 186, 0, 0, 1, 0, 0, 0, 116, 3, 0, 0, 0, 0, 0, 21,

1, 1, 0, 0, 0, 2, 10, 2, 0, 0, 0, 0, 2, 10, 0, 0, 0, 0, 1, 0, 625]
</pre></div>
</td></tr></table></div><p>Here we see the number of pixels of each of the 255 colors on the image. You can see that white (255, the most recent) is found most often. It is followed by red (text). To verify this, we will write a small script:</p><div class="codeblock language-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">itemgetter</span>

<span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;captcha.gif&quot;</span><span class="p">)</span>
<span class="n">im</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s2">&quot;P&quot;</span><span class="p">)</span>
<span class="n">his</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">histogram</span><span class="p">()</span>

<span class="n">values</span> <span class="o">=</span> <span class="p">{}</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">256</span><span class="p">):</span>
    <span class="n">values</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">his</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

<span class="k">for</span> <span class="n">j</span><span class="p">,</span><span class="n">k</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">values</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)[:</span><span class="mi">10</span><span class="p">]:</span>
    <span class="k">print</span> <span class="n">j</span><span class="p">,</span><span class="n">k</span>
</pre></div>
</td></tr></table></div><p>And we get the following data:</p><div style="overflow-x:auto"><table class="table table-bordered table-hover table-condensed"><thead>
<tr>
<th><strong>Color</strong></th>
<th><strong>Number of pixels</strong></th>
</tr>
</thead>

<tbody>
<tr>
<td>255</td>
<td>625</td>
</tr>
<tr>
<td>212</td>
<td>365</td>
</tr>
<tr>
<td>220</td>
<td>186</td>
</tr>
<tr>
<td>219</td>
<td>135</td>
</tr>
<tr>
<td>169</td>
<td>132</td>
</tr>
<tr>
<td>227</td>
<td>116</td>
</tr>
<tr>
<td>213</td>
<td>115</td>
</tr>
<tr>
<td>234</td>
<td>21</td>
</tr>
<tr>
<td>205</td>
<td>18</td>
</tr>
<tr>
<td>184</td>
<td>15</td>
</tr>
</tbody>
</table></div><p>This is a list of the 10 most common colors on the image. As expected, white repeats most often. Then come gray and red.</p><p>Once we get this information, we create new images based on these color groups. For each of the most common colors, we create a new binary image (of 2 colors), where the pixels of this color are filled with black, and everything else is white.</p><p>Red has become the third among the most common colors, which means that we want to save a group of pixels with a color of 220. When I experimented, I found that the color 227 is pretty close to 220, so we will keep this group of pixels as well. The code below opens the captcha, converts it to GIF, creates a new image of the same size with a white background, and then goes through the original image in search of the color we need. If he finds a pixel with the color we need, then he marks that same pixel on the second image as black. Before shutting down, the second image is saved.</p><div class="codeblock language-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>

<span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;captcha.gif&quot;</span><span class="p">)</span>
<span class="n">im</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s2">&quot;P&quot;</span><span class="p">)</span>
<span class="n">im2</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;P&quot;</span><span class="p">,</span><span class="n">im</span><span class="o">.</span><span class="n">size</span><span class="p">,</span><span class="mi">255</span><span class="p">)</span>

<span class="n">im</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s2">&quot;P&quot;</span><span class="p">)</span>

<span class="n">temp</span> <span class="o">=</span> <span class="p">{}</span>

<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">im</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">im</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
        <span class="n">pix</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">getpixel</span><span class="p">((</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">))</span>
        <span class="n">temp</span><span class="p">[</span><span class="n">pix</span><span class="p">]</span> <span class="o">=</span> <span class="n">pix</span>
        <span class="k">if</span> <span class="n">pix</span> <span class="o">==</span> <span class="mi">220</span><span class="ow">or</span> <span class="n">pix</span> <span class="o">==</span> <span class="mi">227</span><span class="p">:</span> <span class="n">_</span><span class="c1"># these are the numbers to get_</span>
            <span class="n">im2</span><span class="o">.</span><span class="n">putpixel</span><span class="p">((</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">),</span><span class="mi">0</span><span class="p">)</span>

<span class="n">im2</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;output.gif&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div><p>Running this piece of code gives us the following result.</p><div style="overflow-x:auto"><table class="table table-bordered table-hover table-condensed"><thead>
<tr>
<th>Original</th>
<th>Result</th>
</tr>
</thead>

<tbody>
<tr>
<td><img src="../media/uploads/2020/05/31/2.png" alt="2.png"></td>
<td><img src="../media/uploads/2020/05/31/3.png" alt="3.png"></td>
</tr>
</tbody>
</table></div><p>On the picture you can see that we successfully managed to extract the text from the background. To automate this process, you can combine the first and second script.</p><p>I hear you asking: &quot;What if the text on the captcha is written in different colors?&quot;. Yes, our technology can still work. Assume the most common color is the background color and then you can find the colors of the characters.</p><p>Thus, at the moment, we have successfully extracted text from the image. The next step is to determine if the image contains text. I will not write code here yet, because it will make understanding difficult, while the algorithm itself is quite simple.</p><div class="codeblock language-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">each</span> <span class="n">binary</span> <span class="n">image</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">each</span> <span class="n">pixel</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">binary</span> <span class="n">image</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">the</span> <span class="n">pixel</span> <span class="ow">is</span> <span class="n">on</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">any</span> <span class="n">pixel</span> <span class="n">we</span> <span class="n">have</span> <span class="n">seen</span> <span class="n">before</span> <span class="ow">is</span> <span class="nb">next</span> <span class="n">to</span> <span class="n">it</span><span class="p">:</span>
                <span class="n">add</span> <span class="n">to</span> <span class="n">the</span> <span class="n">same</span> <span class="nb">set</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">add</span> <span class="n">to</span> <span class="n">a</span> <span class="n">new</span> <span class="nb">set</span>
</pre></div>
</td></tr></table></div><p>At the output, you will have a set of character boundaries. Then all you need to do is to compare them with each other and see if they go sequentially. If yes, then it&#39;s a jackpot since you have correctly identified the characters that go next. You can also check the sizes of the received areas or simply create a new image and show it (applying the show () method to the image) to make sure the algorithm is accurate.</p><div class="codeblock language-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>

<span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;captcha.gif&quot;</span><span class="p">)</span>
<span class="n">im</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s2">&quot;P&quot;</span><span class="p">)</span>
<span class="n">im2</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;P&quot;</span><span class="p">,</span><span class="n">im</span><span class="o">.</span><span class="n">size</span><span class="p">,</span><span class="mi">255</span><span class="p">)</span>

<span class="n">im</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s2">&quot;P&quot;</span><span class="p">)</span>

<span class="n">temp</span> <span class="o">=</span> <span class="p">{}</span>

<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">im</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">im</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
        <span class="n">pix</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">getpixel</span><span class="p">((</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">))</span>
        <span class="n">temp</span><span class="p">[</span><span class="n">pix</span><span class="p">]</span> <span class="o">=</span> <span class="n">pix</span>
        <span class="k">if</span> <span class="n">pix</span> <span class="o">==</span> <span class="mi">220</span><span class="ow">or</span> <span class="n">pix</span> <span class="o">==</span> <span class="mi">227</span><span class="p">:</span> <span class="c1"># these are the numbers to get_</span>
            <span class="n">im2</span><span class="o">.</span><span class="n">putpixel</span><span class="p">((</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">),</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># new code starts here_</span>

<span class="n">inletter</span> <span class="o">=</span> <span class="bp">False</span>
<span class="n">foundletter</span><span class="o">=</span><span class="bp">False</span>
<span class="n">start</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">end</span> <span class="o">=</span> <span class="mi">0</span>

<span class="n">letters</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">im2</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span> <span class="n">_</span><span class="c1"># slice across_</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">im2</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span> <span class="n">_</span><span class="c1"># slice down_</span>
        <span class="n">pix</span> <span class="o">=</span> <span class="n">im2</span><span class="o">.</span><span class="n">getpixel</span><span class="p">((</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">pix</span> <span class="o">!=</span> <span class="mi">255</span><span class="p">:</span>
                <span class="n">inletter</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">if</span> <span class="n">foundletter</span> <span class="o">==</span> <span class="n">Falseand</span> <span class="n">inletter</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">foundletter</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">y</span>

    <span class="k">if</span> <span class="n">foundletter</span> <span class="o">==</span> <span class="n">Trueand</span> <span class="n">inletter</span> <span class="o">==</span> <span class="bp">False</span><span class="p">:</span>
        <span class="n">foundletter</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">end</span> <span class="o">=</span> <span class="n">y</span>
        <span class="n">letters</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">start</span><span class="p">,</span><span class="n">end</span><span class="p">))</span>

    <span class="n">inletter</span><span class="o">=</span><span class="bp">False</span>
<span class="k">print</span> <span class="n">letters</span>
</pre></div>
</td></tr></table></div><p>As a result, we got the following:</p><div class="codeblock language-text"><div class="highlight"><pre><span></span>[(6, 14), (15, 25), (27, 35), (37, 46), (48, 56), (57, 67)]
</pre></div>
</div><p>These are the horizontal positions of the beginning and end of each character.</p><span id="ai-and-vector-space-for-pattern-recognition" class="anchor-target"></span><h2 class="heading">AI and vector space for pattern recognition <a class="header-link" href="index.html#ai-and-vector-space-for-pattern-recognition">#</a></h2><hr>
<p>Image recognition can be considered the greatest success of modern AI, which allowed it to be embedded in all types of commercial applications. A great example of this is zip codes. In fact, in many countries they are read automatically, because teaching a computer to recognize numbers is a fairly simple task. This may not be obvious, but pattern recognition is considered an AI problem, albeit a very highly specialized one.</p><p>Almost the first thing that you encounter when meeting with AI in pattern recognition is neural networks. Personally, I have never had success with neural networks in character recognition. I usually teach it 3-4 characters, after which the accuracy drops so low that it would be higher then guessing the characters randomly. Fortunately, I read an article about vector-space search engines and found them an alternative method for classifying data. In the end, they turned out to be the best choice, because:</p>
<ul>
<li>They do not require extensive study.</li>
<li>You can add / remove incorrect data and immediately see the result</li>
<li>They are easier to understand and program.</li>
<li>They provide classified results so you can see the top X matches.</li>
<li>Can&#39;t recognize something? Add this and you will be able to recognize it instantly, even if it is completely different from something seen earlier.</li>
</ul>
<p>Of course, there is no free cheese. The main disadvantage in speed. They can be much slower than neural networks. But I think that their advantages still outweigh this drawback.</p><p>If you want to understand how vector space works, then I advise you to read the Vector Space Search Engine Theory. This is the best I have found for beginners and I built my image recognition based on this document. Now we have to program our vector space. Fortunately, this is not at all difficult. Let&#39;s get started.</p><div class="codeblock language-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">math</span>

<span class="k">class</span> <span class="nc">VectorCompare</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">magnitude</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">concordance</span><span class="p">):</span>
        <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">word</span><span class="p">,</span><span class="n">count</span> <span class="ow">in</span> <span class="n">concordance</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="n">total</span> <span class="o">+=</span> <span class="n">count</span> \<span class="o">*</span>\<span class="o">*</span> <span class="mi">2</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">total</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">relation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">concordance1</span><span class="p">,</span> <span class="n">concordance2</span><span class="p">):</span>
        <span class="n">relevance</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">topvalue</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">word</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">concordance1</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">concordance2</span><span class="o">.</span><span class="n">has</span>\<span class="n">_key</span><span class="p">(</span><span class="n">word</span><span class="p">):</span>
                <span class="n">topvalue</span> <span class="o">+=</span> <span class="n">count</span> \<span class="o">*</span> <span class="n">concordance2</span><span class="p">[</span><span class="n">word</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">topvalue</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">magnitude</span><span class="p">(</span><span class="n">concordance1</span><span class="p">)</span> \<span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">magnitude</span><span class="p">(</span><span class="n">concordance2</span><span class="p">))</span>
</pre></div>
</td></tr></table></div><p>This is an implementation of Python vector space in 15 lines. Essentially, it just takes 2 dictionaries and gives a number from 0 to 1, indicating how they are connected. 0 means that they are not connected and 1 means that they are identical.</p><span id="training" class="anchor-target"></span><h2 class="heading">Training <a class="header-link" href="index.html#training">#</a></h2><hr>
<p>The next thing we need is a set of images with which we will compare our characters. We need a learning set. This set can be used to train any kind of AI that we will use (neural networks, etc.).</p><p>The data used can be crucial for the success of recognition. The better the data, the greater the chance of success. Since we plan to recognize a specific captcha and can already extract symbols from it, why not use them as a training set?</p><p>This is what I did. I downloaded a lot of generated captcha and my program broke them into letters. Then I collected the received images in a collection (group). After several attempts, I had at least one example of each character generated by the captcha. Adding more examples would increase recognition accuracy, but this was enough for me to confirm my theory.</p><div class="codeblock language-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;captcha.gif&quot;</span><span class="p">)</span>
<span class="n">im2</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;P&quot;</span><span class="p">,</span><span class="n">im</span><span class="o">.</span><span class="n">size</span><span class="p">,</span><span class="mi">255</span><span class="p">)</span>
<span class="n">im</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s2">&quot;P&quot;</span><span class="p">)</span>

<span class="n">temp</span> <span class="o">=</span> <span class="p">{}</span>

<span class="k">print</span> <span class="n">im</span><span class="o">.</span><span class="n">histogram</span><span class="p">()</span>

<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">im</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">im</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
        <span class="n">pix</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">getpixel</span><span class="p">((</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">))</span>
        <span class="n">temp</span><span class="p">[</span><span class="n">pix</span><span class="p">]</span> <span class="o">=</span> <span class="n">pix</span>
        <span class="k">if</span> <span class="n">pix</span> <span class="o">==</span> <span class="mi">220</span><span class="ow">or</span> <span class="n">pix</span> <span class="o">==</span> <span class="mi">227</span><span class="p">:</span>  <span class="c1"># these are the numbers to get</span>
            <span class="n">im2</span><span class="o">.</span><span class="n">putpixel</span><span class="p">((</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">),</span><span class="mi">0</span><span class="p">)</span>

<span class="n">inletter</span> <span class="o">=</span> <span class="bp">False</span>
<span class="n">foundletter</span><span class="o">=</span><span class="bp">False</span>
<span class="n">start</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">end</span> <span class="o">=</span> <span class="mi">0</span>

<span class="n">letters</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">im2</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span> <span class="n">_</span><span class="c1"># slice across_</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">im2</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span> <span class="n">_</span><span class="c1"># slice down_</span>
        <span class="n">pix</span> <span class="o">=</span> <span class="n">im2</span><span class="o">.</span><span class="n">getpixel</span><span class="p">((</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">pix</span> <span class="o">!=</span> <span class="mi">255</span><span class="p">:</span>
            <span class="n">inletter</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">if</span> <span class="n">foundletter</span> <span class="o">==</span> <span class="n">Falseand</span> <span class="n">inletter</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">foundletter</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">y</span>

    <span class="k">if</span> <span class="n">foundletter</span> <span class="o">==</span> <span class="n">Trueand</span> <span class="n">inletter</span> <span class="o">==</span> <span class="bp">False</span><span class="p">:</span>
        <span class="n">foundletter</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">end</span> <span class="o">=</span> <span class="n">y</span>
        <span class="n">letters</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">start</span><span class="p">,</span><span class="n">end</span><span class="p">))</span>
        <span class="n">inletter</span><span class="o">=</span><span class="bp">False</span>

<span class="c1"># New code is here. We just extract each image and save it to disk with</span>
<span class="c1"># what is hopefully a unique name</span>

<span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">letter</span> <span class="ow">in</span> <span class="n">letters</span><span class="p">:</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">md5</span><span class="p">()</span>
    <span class="n">im3</span> <span class="o">=</span> <span class="n">im2</span><span class="o">.</span><span class="n">crop</span><span class="p">((</span> <span class="n">letter</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">letter</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">im2</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">))</span>
    <span class="n">m</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">(),</span><span class="n">count</span><span class="p">))</span>
    <span class="n">im3</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;./</span><span class="si">%s</span><span class="s2">.gif&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()))</span>
    <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>
</td></tr></table></div><p>At the output, we get a set of images in the same directory. Each of them is assigned a unique hash in case you process several captchas.</p><p>Here is the result of this code for our test captcha:</p><div style="overflow-x:auto"><table class="table table-bordered table-hover table-condensed"><thead>
<tr>
<th><img src="../media/uploads/2020/05/31/4.gif" alt="4.gif"></th>
<th><img src="../media/uploads/2020/05/31/5.gif" alt="5.gif"></th>
<th><img src="../media/uploads/2020/05/31/6.gif" alt="6.gif"></th>
<th><img src="../media/uploads/2020/05/31/7.gif" alt="7.gif"></th>
<th><img src="../media/uploads/2020/05/31/8.gif" alt="8.gif"></th>
<th><img src="../media/uploads/2020/05/31/9.gif" alt="9.gif"></th>
</tr>
</thead>

<tbody>
</tbody>
</table></div><p>You decide how to store these images, but I just placed them in a directory with the same name that is on the image (symbol or number).</p><span id="putting-it-all-together" class="anchor-target"></span><h2 class="heading">Putting it all together <a class="header-link" href="index.html#putting-it-all-together">#</a></h2><hr>
<p>Last step. We have text extraction, character extraction, recognition technique and training set.</p><p>We get an image of captcha, select text, get characters, and then compare them with our training set. You can download the final program with a training set and a small number of captchas <a href="http://www.wausita.com/captcha/captcha.zip">at this link</a>.</p><p>Here we just load the training set to be able to compare our captchas with it:</p><div class="codeblock language-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">buildvector</span><span class="p">(</span><span class="n">im</span><span class="p">):</span>
    <span class="n">d1</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">im</span><span class="o">.</span><span class="n">getdata</span><span class="p">():</span>
        <span class="n">d1</span><span class="p">[</span><span class="n">count</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
        <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">d1</span>

<span class="n">v</span> <span class="o">=</span> <span class="n">VectorCompare</span><span class="p">()</span>
<span class="n">iconset</span> <span class="o">=</span>
<span class="p">[</span><span class="s1">&#39;0&#39;</span><span class="p">,</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="s1">&#39;2&#39;</span><span class="p">,</span><span class="s1">&#39;3&#39;</span><span class="p">,</span><span class="s1">&#39;4&#39;</span><span class="p">,</span><span class="s1">&#39;5&#39;</span><span class="p">,</span><span class="s1">&#39;6&#39;</span><span class="p">,</span><span class="s1">&#39;7&#39;</span><span class="p">,</span><span class="s1">&#39;8&#39;</span><span class="p">,</span><span class="s1">&#39;9&#39;</span><span class="p">,</span><span class="s1">&#39;0&#39;</span><span class="p">,</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">,</span><span class="s1">&#39;d&#39;</span><span class="p">,</span><span class="s1">&#39;e&#39;</span><span class="p">,</span><span class="s1">&#39;f&#39;</span><span class="p">,</span><span class="s1">&#39;g&#39;</span><span class="p">,</span><span class="s1">&#39;h&#39;</span><span class="p">,</span><span class="s1">&#39;i&#39;</span><span class="p">,</span><span class="s1">&#39;j&#39;</span><span class="p">,</span><span class="s1">&#39;k&#39;</span><span class="p">,</span><span class="s1">&#39;l&#39;</span><span class="p">,</span><span class="s1">&#39;m&#39;</span><span class="p">,</span><span class="s1">&#39;n&#39;</span><span class="p">,</span><span class="s1">&#39;o&#39;</span><span class="p">,</span><span class="s1">&#39;p&#39;</span><span class="p">,</span><span class="s1">&#39;q&#39;</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">,</span><span class="s1">&#39;s&#39;</span><span class="p">,</span><span class="s1">&#39;t&#39;</span><span class="p">,</span><span class="s1">&#39;u&#39;</span><span class="p">,</span><span class="s1">&#39;v&#39;</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">,</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="s1">&#39;z&#39;</span><span class="p">]</span>

<span class="n">imageset</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">letter</span> <span class="ow">in</span> <span class="n">iconset</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s1">&#39;./iconset/</span><span class="si">%s</span><span class="s1">/&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">letter</span><span class="p">)):</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">img</span> <span class="o">!=</span> <span class="s2">&quot;Thumbs.db&quot;</span><span class="p">:</span>
            <span class="n">temp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">buildvector</span><span class="p">(</span><span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;./iconset/</span><span class="si">%s</span><span class="s2">/</span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">letter</span><span class="p">,</span><span class="n">img</span><span class="p">))))</span>
        <span class="n">imageset</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="n">letter</span><span class="p">:</span><span class="n">temp</span><span class="p">})</span>
</pre></div>
</td></tr></table></div><p>And then all the magic is happening. We determine where each character is and check it with our vector space. Then we sort the results and print them.</p><div class="codeblock language-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">letter</span> <span class="ow">in</span> <span class="n">letters</span><span class="p">:</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">md5</span><span class="p">()</span>
    <span class="n">im3</span> <span class="o">=</span> <span class="n">im2</span><span class="o">.</span><span class="n">crop</span><span class="p">((</span> <span class="n">letter</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">letter</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">im2</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">))</span>

    <span class="n">guess</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">imageset</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="ow">in</span> <span class="n">image</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">guess</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">(</span> <span class="n">v</span><span class="o">.</span><span class="n">relation</span><span class="p">(</span><span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">buildvector</span><span class="p">(</span><span class="n">im3</span><span class="p">)),</span><span class="n">x</span><span class="p">)</span> <span class="p">)</span>

    <span class="n">guess</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="k">print</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="n">guess</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>
</td></tr></table></div><span id="conclusions-about-solving-simple-captchas" class="anchor-target"></span><h2 class="heading">Conclusions about solving simple captchas <a class="header-link" href="index.html#conclusions-about-solving-simple-captchas">#</a></h2><hr>
<p>Now we have everything we need and we can try to launch our machine.</p><p>The input file is captcha.gif. Expected Result: 7s9t9j</p><div class="codeblock language-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">crack</span><span class="o">.</span><span class="n">py</span>
<span class="p">(</span><span class="mf">0.96376811594202894</span><span class="p">,</span> <span class="s1">&#39;7&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="mf">0.96234028545977002</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="mf">0.9286884286888929</span><span class="p">,</span> <span class="s1">&#39;9&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="mf">0.98350370609844473</span><span class="p">,</span> <span class="s1">&#39;t&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="mf">0.96751165072506273</span><span class="p">,</span> <span class="s1">&#39;9&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="mf">0.96989711688772628</span><span class="p">,</span> <span class="s1">&#39;j&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div><p>Here we can see the alleged symbol and the degree of confidence that it&#39;s it (from 0 to 1).</p><p>So, it seems that we really succeeded!</p><p>In fact, on test captchas this script will produce a successful result in about only 22% of cases.</p><div class="codeblock language-text"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span>python crack\_test.py
Correct Guesses - 11.0
Wrong Guesses - 37.0
Percentage Correct - 22.9166666667
Percentage Wrong - 77.0833333333
</pre></div>
</td></tr></table></div><p>Most of incorrect results are related to incorrect recognition of the digit &quot;0&quot; and the letter &quot;O&quot;, which is not really unexpected, since even people often confuse them. Also we still have a problem with breaking captcha into characters, but this can be solved simply by checking the result of breaking and finding a middle ground.</p><p>However, even with such a not-so-perfect algorithm, we can correctly solve every fifth captcha and it will be faster than a real person could solve one.</p><p>Running this code on a Core 2 Duo E6550 gives the following results:</p><div class="codeblock language-text"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span>real 0m5.750s
user 0m0.015s
sys 0m0.000s
</pre></div>
</td></tr></table></div><p>With our 22% success rate, we can solve about 432,000 captcha per day and get 95,040 correct results. Imagine using multithreading.</p><span id="what-about-recaptcha" class="anchor-target"></span><h2 class="heading">What about ReCaptcha? <a class="header-link" href="index.html#what-about-recaptcha">#</a></h2><hr>
<p>It was all about really plain captchas. What about ReCaptcha v2 which is used now more often?</p><p>Well, things are more complicated here, since even if creating a CNN (Convolutional Neural Network) for solving ReCaptcha is possible, it would be extremelly expensive to develop and maintain such a project, since Google adds more image types to it on a regular basis.</p><p>That&#39;s why more efficient solution would be to use an online <a href="https://prowebscraper.com/blog/top-10-captcha-solving-services-compared/">captcha-solving service</a> as, for example, 2captcha.com</p><p>This particular service is really a good example, since it has its significant pros among others, such as:</p>
<ul>
<li><p>high speed of solution (17 seconds for normal (graphic and text) captchas and 33 seconds for ReCaptcha)</p></li>
<li><p>ready libraries for many popular programming languages</p></li>
<li><p>fixed price rates (which don&#39;t change along with increasing server&#39;s load)</p></li>
<li><p>high accuracy (up to 99%, depending on captcha type)</p></li>
<li><p>money-back guarantee for incorrect answers</p></li>
<li><p>possibility to solve vast volume of captchas (more than 10,000 every minute)</p></li>
<li><p>referal program for soft-developers, customers and workers, which allows to get up to 15% of all spendings of referred users.</p></li>
</ul>
<p>The main idea is that you can solve ReCaptcha (as well as other complicated captchas) via simple API anytime and in any number.</p><span id="how-to-use-2captchacom-for-solving-recaptcha-with-example" class="anchor-target"></span><h2 class="heading">How to use 2captcha.com for solving ReCaptcha (with example) <a class="header-link" href="index.html#how-to-use-2captchacom-for-solving-recaptcha-with-example">#</a></h2><hr>
<p>To solve a ReCaptcha using 2captcha there is simple algorithm:</p>
<ol>
<li><p>The target site open credentials (recaptcha&#39;s &quot;site key&quot;, site url, optional: proxy IP) are copied by you (client) and submitted to the 2captcha service. You find them using simple web developer tools.</p></li>
<li><p>A worker at the service&#39;s end solves reCaptcha with the provided credentials.</p></li>
<li><p>In 10-30 seconds you request an answer as a g-recaptcha-response token.</p></li>
<li><p>You use this g-recaptcha-response token inside of the target site [submit] form with recaptcha.</p></li>
</ol>
<p>It would be important to tell that all these steps you can do without imitating a browser, but just by pure http GET and POST requests, and I&#39;ll show you how.</p><span id="get-credentials" class="anchor-target"></span><h2 class="heading">Get credentials <a class="header-link" href="index.html#get-credentials">#</a></h2><hr>
<p>2captcha service requires us to provide it with the following parameters:</p><div style="overflow-x:auto"><table class="table table-bordered table-hover table-condensed"><thead>
<tr>
<th><strong>Request parameter</strong></th>
<th><strong>Value</strong></th>
</tr>
</thead>

<tbody>
<tr>
<td>key</td>
<td>SERVICE_KEY (2 captchas service key)</td>
</tr>
<tr>
<td>googlekey</td>
<td>data-sitekey attribute value in g-recaptcha block element</td>
</tr>
<tr>
<td>pageurl</td>
<td><a href="http://testing-ground.scraping.pro/recaptcha">http://testing-ground.scraping.pro/recaptcha</a> (url of a target page with recaptcha)</td>
</tr>
<tr>
<td>method</td>
<td>userrecaptcha</td>
</tr>
</tbody>
</table></div><p>So, we are going to the site page and inspect the recaptcha html code in web developer tools (hit F12). There we find and get the data-sitekey attribute value in the g-recaptcha block. Its value is a constant for a single site, the site_key value provided by Google.</p><p>We select it and right-click to copy.</p><p>Now we have gotten the googlekey parameter (google site_key for this particular site): 6Lf5CQkTAAAAAKA-kgNm9mV6sgqpGmRmRMFJYMz8</p><p><code>SERVICE_KEY</code> for the following requests is taken from the 2captcha account settings.</p><span id="submit-to-service-a-request-for-recaptcha-solution" class="anchor-target"></span><h2 class="heading">Submit to service a request for recaptcha solution <a class="header-link" href="index.html#submit-to-service-a-request-for-recaptcha-solution">#</a></h2><hr>
<p>Now we make a GET or POST request to the 2captcha service (in.php endpoint) with the above-mentioned parameters:</p><div class="codeblock language-text"><div class="highlight"><pre><span></span>http://2captcha.com/in.php?key=SERVICE_KEY&amp;method=userrecaptcha&amp;googlekey=6Lf5CQkTAAAAAKA-kgNm9mV6sgqpGmRmRMFJYMz8&amp;pageurl=http://testing-ground.scraping.pro/recaptcha
</pre></div>
</div><div class="codeblock language-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span><span class="p">,</span> <span class="n">time</span>

<span class="n">service</span>\<span class="n">_key</span> <span class="o">=</span> <span class="s1">&#39;xxxxxxxxxxxxxx&#39;</span><span class="p">;</span> <span class="c1"># 2captcha service key</span>
<span class="n">google</span>\<span class="n">_site</span>\<span class="n">_key</span> <span class="o">=</span> <span class="s1">&#39;6LfxxxxxxxxxxxxxxxxxxxxxFMz856JY&#39;</span>
<span class="n">pageurl</span> <span class="o">=</span> <span class="s1">&#39;http://testing-ground.scraping.pro/recaptcha&#39;</span>
<span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;http://2captcha.com/in.php?key=&quot;</span> <span class="o">+</span> <span class="n">service</span>\<span class="n">_key</span> <span class="o">+</span><span class="s2">&quot;&amp;method=userrecaptcha&amp;googlekey=&quot;</span> <span class="o">+</span> <span class="n">google_site_key</span> <span class="o">+</span> <span class="s2">&quot;&amp;pageurl=&quot;</span> <span class="o">+</span> <span class="n">pageurl</span>
<span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="k">if</span> <span class="n">resp</span><span class="o">.</span><span class="n">text</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;OK&#39;</span><span class="p">:</span>
    <span class="n">quit</span><span class="p">(</span><span class="s1">&#39;Service error. Error code:&#39;</span> <span class="o">+</span> <span class="n">resp</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
<span class="n">captcha_id</span> <span class="o">=</span> <span class="n">resp</span><span class="o">.</span><span class="n">text</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span>
</pre></div>
</td></tr></table></div><p>The 2captcha service renders a response in the form of: OK|Captcha_ID where Captcha_ID – is the id of the recaptcha in the system.</p><span id="receive-valid-token" class="anchor-target"></span><h2 class="heading">Receive valid token <a class="header-link" href="index.html#receive-valid-token">#</a></h2><hr>
<p>Now we need to wait till a worker solves the recaptcha and Google returns a valid token to the service. To do this we make a request to the 2captcha service every 5 seconds until we get a valid token. Take a look on a request to res.php endpoint with all the necessary parameters:</p><p><a href="http://2captcha.com/res.php?key=SERVICE_KEY&amp;amp;action=get&amp;amp;id=Captcha_ID">http://2captcha.com/res.php?key=SERVICE_KEY&amp;action=get&amp;id=Captcha_ID</a></p><p>fetch_url = &quot;<a href="http://2captcha.com/res.php?key=%22+">http://2captcha.com/res.php?key=&quot;+</a> service_key + &quot;&amp;action=get&amp;id=&quot; + captcha_id</p><div class="codeblock language-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">fetch_url</span> <span class="o">=</span> <span class="s2">&quot;http://2captcha.com/res.php?key=&quot;</span><span class="o">+</span> <span class="n">service_key</span> <span class="o">+</span> <span class="s2">&quot;&amp;action=get&amp;id=&quot;</span> <span class="o">+</span> <span class="n">captcha_id</span>
 
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">):</span>
<span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="c1"># wait 5 sec.</span>
<span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">fetch_url</span><span class="p">)</span>

<span class="k">if</span> <span class="n">resp</span><span class="o">.</span><span class="n">text</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;OK&#39;</span><span class="p">:</span>
    <span class="k">break</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Google response token: &#39;</span><span class="p">,</span> <span class="n">resp</span><span class="o">.</span><span class="n">text</span><span class="p">[</span><span class="mi">3</span><span class="p">:])</span>
</pre></div>
</td></tr></table></div><span id="submit-google39s-token-in-form" class="anchor-target"></span><h2 class="heading">Submit google&#39;s token in form <a class="header-link" href="index.html#submit-google39s-token-in-form">#</a></h2><hr>
<p>Now we submit the form with the g-recaptcha-response token.</p><p>This token is checked on a server of a target site. The site&#39;s script sends a request to Google to check the g-recaptcha-response token&#39;s validity: is it true or not, pertaining to that site or not, etc. At our Captcha testing ground this token is checked before the form submission. It is done by passing a token through ajax (xhr) request to proxy.php which, in turn, inquires of google if the site is verified and returns google&#39;s response.</p><p><strong>proxy.php</strong></p><div class="codeblock language-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="x">header(&#39;Content-type: application/json&#39;);</span>
<span class="x">$response = $_GET[&#39;response&#39;];</span>
<span class="x">$secret = &quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;;  </span>
<span class="x">$json = file_get_contents(&#39;https://www.google.com/recaptcha/api/siteverify?secret=&#39; . $secret . &#39;&amp;response=&#39; . $response);</span>
<span class="x">echo $json;</span>
</pre></div>
</td></tr></table></div><span id="python-code-to-send-g-recaptcha-response-to-proxyphp-for-site-verification-by-google" class="anchor-target"></span><h2 class="heading">Python code to send g-recaptcha-response to proxy.php for site verification by google <a class="header-link" href="index.html#python-code-to-send-g-recaptcha-response-to-proxyphp-for-site-verification-by-google">#</a></h2><hr>
<div class="codeblock language-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">verify_url</span> <span class="o">=</span> <span class="s2">&quot;http://testing-ground.scraping.pro/proxy.php?response=&quot;</span> <span class="o">+</span> <span class="n">resp</span><span class="o">.</span><span class="n">text</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span>
<span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">verify_url</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</td></tr></table></div><p>The script should result in a json:</p><div class="codeblock language-text"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span>{ &quot;success&quot;: true,
&quot;challenge\_ts&quot;: &quot;2016-09-29T09:25:55Z&quot;,
&quot;hostname&quot;: &quot;testing-ground.scraping.pro&quot;}
</pre></div>
</td></tr></table></div><span id="python-code-of-a-form-submitting-with-g-recaptcha-response" class="anchor-target"></span><h2 class="heading">Python code of a form submitting with g-recaptcha-response: <a class="header-link" href="index.html#python-code-of-a-form-submitting-with-g-recaptcha-response">#</a></h2><hr>
<div class="codeblock language-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">submit_url</span> <span class="o">=</span> <span class="s2">&quot;http://testing-ground.scraping.pro/recaptcha</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;user-agent&#39;</span><span class="p">:</span> <span class="s1">&#39;Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.116 Safari/537.36&#39;</span><span class="p">}</span>
<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;submit&#39;</span><span class="p">:</span> <span class="s1">&#39;submit&#39;</span><span class="p">,</span> <span class="s1">&#39;g-recaptcha-response&#39;</span><span class="p">:</span> <span class="n">resp</span><span class="o">.</span><span class="n">test</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span> <span class="p">}</span>
<span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">submit_url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</pre></div>
</td></tr></table></div><span id="the-whole-code" class="anchor-target"></span><h2 class="heading">The whole code <a class="header-link" href="index.html#the-whole-code">#</a></h2><hr>
<div class="codeblock language-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span><span class="p">,</span> <span class="n">time</span>
<span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
 
<span class="c1"># send credentials to the service to solve captcha</span>
<span class="c1"># returns service&#39;s captcha_id of captcha to be solved</span>
<span class="n">url</span><span class="o">=</span><span class="s2">&quot;http://2captcha.com/in.php?key=1069c3052adead147d1736d7802fabe2&amp;method=userrecaptcha&amp;googlekey=6Lf5CQkTAAAAAKA-kgNm9mV6sgqpGmRmRMFJYMz8&amp;pageurl=http://testing-ground.scraping.pro/recaptcha&quot;</span>
<span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="k">if</span> <span class="n">resp</span><span class="o">.</span><span class="n">text</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;OK&#39;</span><span class="p">:</span>
    <span class="n">quit</span><span class="p">(</span><span class="s1">&#39;Error. Captcha is not received&#39;</span><span class="p">)</span>
    <span class="n">captcha_id</span> <span class="o">=</span> <span class="n">resp</span><span class="o">.</span><span class="n">text</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span>
 
<span class="c1"># fetch ready &#39;g-recaptcha-response&#39; token for captcha_id  </span>
<span class="n">fetch_url</span> <span class="o">=</span> <span class="s2">&quot;http://2captcha.com/res.php?key=1069c3052adead147d1736d7802fabe2&amp;action=get&amp;id=&quot;</span> <span class="o">+</span> <span class="n">captcha_id</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">20</span><span class="p">):</span>
    <span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="c1"># wait 5 sec.</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">fetch_url</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">resp</span><span class="o">.</span><span class="n">text</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;OK&#39;</span><span class="p">:</span>
        <span class="k">break</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Time to solve: &#39;</span><span class="p">,</span> <span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span>
 
<span class="c1"># final submitting of form (POST) with &#39;g-recaptcha-response&#39; token</span>
<span class="n">submit_url</span> <span class="o">=</span> <span class="s2">&quot;http://testing-ground.scraping.pro/recaptcha&quot;</span>
    <span class="c1"># spoof user agent</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;user-agent&#39;</span><span class="p">:</span> <span class="s1">&#39;Mozilla/5.0 Chrome/52.0.2743.116 Safari/537.36&#39;</span><span class="p">}</span>
    <span class="c1"># POST parameters, might be more, depending on form content</span>
<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;submit&#39;</span><span class="p">:</span> <span class="s1">&#39;submit&#39;</span><span class="p">,</span> <span class="s1">&#39;g-recaptcha-response&#39;</span><span class="p">:</span> <span class="n">resp</span><span class="o">.</span><span class="n">text</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span>  <span class="p">}</span>
<span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">submit_url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</pre></div>
</td></tr></table></div><span id="limitations" class="anchor-target"></span><h2 class="heading">Limitations <a class="header-link" href="index.html#limitations">#</a></h2><hr>
<p>The received g-recaptcha-response token (from 2captcha service) is valid for only 120 seconds (2 min), so you are responsible to apply it on the target site [submit] form within that time limit.</p><span id="other-language-solutions" class="anchor-target"></span><h2 class="heading">Other language solutions <a class="header-link" href="index.html#other-language-solutions">#</a></h2><hr>
<p>You might also look at other language options for how to apply 2captcha service:</p><p><a href="https://webscraping.pro/2captcha-service-integration-with-c-code">C# code</a> (code for the same testing-ground page)</p><p><a href="https://smmsoft.blogspot.com/2016/08/recaptcha-java-phantomjs-jsoup.html">Java example</a> (with Russian comments only)</p><span id="afterword" class="anchor-target"></span><h2 class="heading">Afterword <a class="header-link" href="index.html#afterword">#</a></h2><hr>
<p>Here I showed you different approaches to solve captchas in automatic mode, which allows to perform wide variety of actions online. While the it is up to person — in what way to use this knowlege, a development of defensive methods agains unwanted online activity makes the appropriate development of cracking methods inevitable.</p>

<hr>

<p>Other Tutorials (Sponsors)</p>

<p class="advert">
    This site generously supported by
    <a rel="sponsored noopener" target="_blank"
       href="https://www.datacamp.com/?utm_source=thepythonguru&utm_campaign=thepythonguru_tutorials">
        DataCamp</a>. DataCamp offers online interactive
    <a rel="sponsored noopener" target="_blank" href="https://www.datacamp.com/courses/?utm_source=thepythonguru&utm_campaign=thepythonguru_tutorials">
        Python Tutorials
    </a> for Data Science. Join over a million other learners and get
    started learning Python for data science today!
</p>


    



        <nav aria-label="pagination">
            <ul class="pager">
                
                    <li class="previous">
                        <a href="../how-to-write-an-effective-resume-of-python-developer/index.html" title="How to Write an Effective Resume of Python Developer">
                            <span class="fa fa-arrow-left" aria-hidden="true"></span>
                            How to Write an Effective Resume of Pyt…
                        </a>
                    </li>
                

                
                    <li class="next">
                        <a href="../how-to-make-money-if-you-have-python-skills/index.html" title="How To Make Money If You Have Python Skills">
                            How To Make Money If You Have Python Sk…
                            <span class="fa fa-arrow-right" aria-hidden="true"></span>
                        </a>
                    </li>
                
            </ul>
        </nav>





<hr>



    <div id="disqus_thread">
    <p style="margin-bottom: 22px" class="text-center">
        <a href="index.html#" class=" btn btn-primary comments-holder" onclick="loadDisqus();return false;">View Comments</a>
    </p>
    </div>
    <script>
        var is_disqus_loaded = false;
        function loadDisqus() { // DON'T EDIT BELOW THIS LINE
            is_disqus_loaded = true;
            var d = document, s = d.createElement('script');
            s.src = 'https://thepythonguru.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        }
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>







            </div>
        </div>


        <div class="sidebar">
        
            <div class="col-lg-4 col-md-4 col-sm-12">
                

    
        

<div class="well">
    <form action="https://thepythonguru.com/search/">
        <div class="input-group">
            <input type="text" class="form-control" name="query" placeholder="Search here"
                   value="">
            <span class="input-group-btn">
                            <button class="btn btn-default" type="submit">
                                <span class="glyphicon glyphicon-search"></span>
                        </button>
                        </span>
        </div>
    </form>
    <!-- /.input-group -->
</div>

<div class="well" id="myAffix">
    <a href="https://www.datacamp.com/" rel="noopener">
        <img class="center-block" src="../static/wiki/images/filip_ad.png" alt="">
    </a>
</div>



<div class="well">
    <h4>Recent Posts</h4>
    <ul>
        
            <li><a href="../tips-to-become-a-top-gamer/index.html">Tips to Become a Top Gamer</a></li>
        
            <li><a href="../choosing-the-right-database-service-factors-to-consider-for-scalability-security-and-performance/index.html">Choosing the Right Database Service: Factors to Consider for Scalability, Security, and Performance</a></li>
        
            <li><a href="../benefits-of-using-python-for-cyber-security/index.html">Benefits of Using Python for Cyber Security</a></li>
        
            <li><a href="../vue-vs-react-what-are-the-best-js-technologies-in-2023/index.html">Vue VS React: What Are The Best JS Technologies In 2023</a></li>
        
            <li><a href="../why-you-should-choose-python-in-2023/index.html">Why You Should Choose Python in 2023?</a></li>
        

    </ul>
</div>

    

    
        
    


            </div>
        </div>
    </div>



    <hr>

    <!-- Footer -->
    <footer class="text-center tpg-footer" >
        <div class="row">
            <div class="col-lg-12">
                <ul class="tpg-footer-links text-center">
                    <li><a href="../about/index.html">About</a></li>
                    <li><a href="../terms-of-use/index.html">Terms</a></li>
                    <li><a href="../privacy-policy/index.html">Privacy Policy</a></li>
                    <li><a href="../contact-us/index.html">Contact</a></li>
                </ul>
                <hr>
                <p>&copy; 2025 ThePythonGuru.com</p>
            </div>
            <!-- /.col-lg-12 -->
        </div>
        <!-- /.row -->
    </footer>

</div>

<script type="text/javascript" src="../static/CACHE/js/output.1879f88478d8.js"></script>




<script>
    window.cookieconsent.initialise({
        "palette": {
            "popup": {
                "background": "#252e39"
            },
            "button": {
                "background": "#14a7d0"
            }
        },
        "theme": "classic",
        "content": {
            "href": "https://thepythonguru.com/privacy-policy/"
        }
    });
</script>

<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>

</body>
</html>

